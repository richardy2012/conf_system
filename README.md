
应用配置集中管理系统


*概览*：

整个st 配置中心分成服务器端和客户端
服务器端即由web交互[为了配置表单生成更加方便，排错，可追溯，可审计] 和 zk服务器[核心组件]组成。

客户端即由 游戏服务器上部署 qconf[基于360团队的开源项目] 和 st_game_conf_client.py[调用qconf监控配置是否发生改变，
若改变则重写配置文件，重启应用][daemon进程，每2s钟监控一次]

    
```
    服务器端
    |__zookeeper 服务器
    |
    |__web 交互站

    zookeeper 服务器

    |__已目录形式创建配置文件
    |
    |__命名形式：hostname/server_num/app_name/conf 暂定

    ---------------------------------------------------------------------------------
    web 交互站 基于HDSG BACKSTAGE 7.0版本后台开发

    |__机器列表
    |__配置列表
    |__基础和审计
   
    客户端
    |__qconf 常驻进程,
    |__st_game_conf_client.py  python常驻进程


    qconf 常驻进程

    |__360团段开源项目，被写成常驻进程保持同zk服务器的心跳连接，有变化会将节点内容同步到本地。
    |__ https://github.com/Qihoo360/QConf/wiki


    st_game_conf_client.py
    |__ [写成python常驻进程，调用qconf 获得最新的配置信息同本地配置比较,
                                        如zk服务器对配置进行了更新，则同步并复写本地配置.]

```

*构架*:

```
    +-------------+     +-------------+     +-------------+     +-------------+
    | server1     |     | server2     |     | server3     |     | serverN     |
    |-------------|     |-------------|     |-------------|     |-------------|
    |   Apps      |     |   Apps      |     |   Apps      |     |   Apps      |
    |-------------|     |-------------|     |-------------|     |-------------|
    |conf_agent.py|     |conf_agent.py|     |conf_agent.py|     |conf_agent.py|
    |-------------|     |-------------|     |-------------|     |-------------|
    |Qconf agent  |     |Qconf agent  |     |Qconf agent  |     |Qconf agent  |
    +-------------+     +-------------+     +-------------+     +-------------+
        |                       |                     |                  |
         -----------------------------------------------------------------
                            |
                            | TCP Heartbeat
                            V
                   +-----------------+        +-----------------+
                   |                 |        |                 |
                   |ZooKeeper cluster| -----> |    web FE       |
                   | server          | <----- |                 |
                   |                 |        |                 |
                   +-----------------+        +-----------------+

```

*相关*：

```
Qconf链接：https://github.com/Qihoo360/QConf/wiki

```